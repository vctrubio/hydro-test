import{j as r,r as j}from"./jsx-runtime-BMrMXMSG.js";import{l as e,X as a,m as h,G as m}from"./index-C5AQyKIf.js";import{u as v}from"./Aside-BD5tFIGa.js";import{u as f,A as b,L as g}from"./components-BcnCSsUz.js";import{I as N}from"./Image-4ZSXy-qP.js";import{M as d}from"./Money-ivyePXta.js";const M=({data:s})=>[{title:`Hydrogen | ${(s==null?void 0:s.product.title)??""}`}];function E(){const{product:s,variants:i}=f(),{selectedVariant:o}=s;return r.jsxs("div",{className:"product",children:[r.jsx(y,{image:o==null?void 0:o.image}),r.jsx(P,{selectedVariant:o,product:s,variants:i}),r.jsx(e.ProductView,{data:{products:[{id:s.id,title:s.title,price:(o==null?void 0:o.price.amount)||"0",vendor:s.vendor,variantId:(o==null?void 0:o.id)||"",variantTitle:(o==null?void 0:o.title)||"",quantity:1}]}})]})}function y({image:s}){return s?r.jsx("div",{className:"product-image",children:r.jsx(N,{alt:s.altText||"Product Image",aspectRatio:"1/1",data:s,sizes:"(min-width: 45em) 50vw, 100vw"},s.id)}):r.jsx("div",{className:"product-image"})}function P({selectedVariant:s,product:i,variants:o}){const{title:n,descriptionHtml:t}=i;return r.jsxs("div",{className:"product-main",children:[r.jsx("h1",{children:n}),r.jsx(w,{selectedVariant:s}),r.jsx("br",{}),r.jsx(j.Suspense,{fallback:r.jsx(x,{product:i,selectedVariant:s,variants:[]}),children:r.jsx(b,{errorElement:"There was a problem loading product variants",resolve:o,children:c=>{var u;return r.jsx(x,{product:i,selectedVariant:s,variants:((u=c==null?void 0:c.product)==null?void 0:u.variants.nodes)||[]})}})}),r.jsx("br",{}),r.jsx("br",{}),r.jsx("p",{children:r.jsx("strong",{children:"Description"})}),r.jsx("br",{}),r.jsx("div",{dangerouslySetInnerHTML:{__html:t}}),r.jsx("br",{})]})}function w({selectedVariant:s}){return r.jsx("div",{className:"product-price",children:s!=null&&s.compareAtPrice?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Sale"}),r.jsx("br",{}),r.jsxs("div",{className:"product-price-on-sale",children:[s?r.jsx(d,{data:s.price}):null,r.jsx("s",{children:r.jsx(d,{data:s.compareAtPrice})})]})]}):(s==null?void 0:s.price)&&r.jsx(d,{data:s==null?void 0:s.price})})}function x({product:s,selectedVariant:i,variants:o}){const{open:n}=v(),{publish:t,shop:c,cart:u,prevCart:l}=a();return r.jsxs("div",{className:"product-form",children:[r.jsx(h,{handle:s.handle,options:s.options,variants:o,children:({option:p})=>r.jsx(A,{option:p},p.name)}),r.jsx("br",{}),r.jsx(S,{disabled:!i||!i.availableForSale,onClick:()=>{n("cart"),t("cart_viewed",{cart:u,prevCart:l,shop:c,url:window.location.href||""})},lines:i?[{merchandiseId:i.id,quantity:1,selectedVariant:i}]:[],children:i!=null&&i.availableForSale?"Add to cart":"Sold out"})]})}function A({option:s}){return r.jsxs("div",{className:"product-options",children:[r.jsx("h5",{children:s.name}),r.jsx("div",{className:"product-options-grid",children:s.values.map(({value:i,isAvailable:o,isActive:n,to:t})=>r.jsx(g,{className:"product-options-item",prefetch:"intent",preventScrollReset:!0,replace:!0,to:t,style:{border:n?"1px solid black":"1px solid transparent",opacity:o?1:.3},children:i},s.name+i))}),r.jsx("br",{})]},s.name)}function S({analytics:s,children:i,disabled:o,lines:n,onClick:t}){return r.jsx(m,{route:"/cart",inputs:{lines:n},action:m.ACTIONS.LinesAdd,children:c=>r.jsxs(r.Fragment,{children:[r.jsx("input",{name:"analytics",type:"hidden",value:JSON.stringify(s)}),r.jsx("button",{type:"submit",onClick:t,disabled:o??c.state!=="idle",children:i})]})})}export{E as default,M as meta};
