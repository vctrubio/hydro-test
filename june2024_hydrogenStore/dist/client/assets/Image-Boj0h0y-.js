import{r as l,j}from"./jsx-runtime-D2HyDbKh.js";const K=l.forwardRef(({alt:t,aspectRatio:e,crop:i="center",data:n,decoding:s="async",height:c="auto",loader:f=$,loading:r="lazy",sizes:x,src:d,srcSetOptions:v={intervals:15,startingWidth:200,incrementSize:200,placeholderWidth:100},width:u="100%",...o},g)=>{const h=l.useMemo(()=>{const H=n!=null&&n.width&&(n!=null&&n.height)?n==null?void 0:n.width:void 0,m=n!=null&&n.width&&(n!=null&&n.height)?n==null?void 0:n.height:void 0;return{width:H,height:m,unitsMatch:!!I(H,m)}},[n]),S=l.useMemo(()=>{const m=a((u||"100%").toString()),L=`${m.number}${m.unit}`,F=c==null,b=F?null:a(c.toString()),T=b?`${b.number}${b.unit}`:"",_=F?"auto":T,k=d||(n==null?void 0:n.url),B=n!=null&&n.altText&&!t?n==null?void 0:n.altText:t||"",D=e||(h.unitsMatch?[R(h.width),R(h.height)].join("/"):void 0);return{width:L,height:_,src:k,alt:B,aspectRatio:D}},[u,c,d,n,t,e,h,o==null?void 0:o.key]),{intervals:w,startingWidth:y,incrementSize:M,placeholderWidth:U}=v,p=l.useMemo(()=>C(u,w,y,M),[u,w,y,M]);return A(S.width)?j.jsx(V,{aspectRatio:e,crop:i,decoding:s,height:c,imageWidths:p,loader:f,loading:r,normalizedProps:S,passthroughProps:o,ref:g,width:u}):j.jsx(q,{aspectRatio:e,crop:i,decoding:s,imageWidths:p,loader:f,loading:r,normalizedProps:S,passthroughProps:o,placeholderWidth:U,ref:g,sizes:x})}),V=l.forwardRef(({aspectRatio:t,crop:e,decoding:i,height:n,imageWidths:s,loader:c=$,loading:f,normalizedProps:r,passthroughProps:x,width:d},v)=>{const u=l.useMemo(()=>{const o=R(d),g=R(n),h=t||(I(r.width,r.height)?[o,g].join("/"):r.aspectRatio?r.aspectRatio:void 0),S=s===void 0?void 0:N(s,h,e),w=g||(h&&o?o*(W(h)??1):void 0),y=E(r.src,S,c),M=c({src:r.src,width:o,height:w,crop:r.height==="auto"?void 0:e});return{width:o,aspectRatio:h,height:w,srcSet:y,src:M}},[t,e,n,s,c,r,d]);return j.jsx("img",{ref:v,alt:r.alt,decoding:i,height:u.height,loading:f,src:u.src,srcSet:u.srcSet,width:u.width,style:{aspectRatio:u.aspectRatio,...x.style},...x})}),q=l.forwardRef(({crop:t,decoding:e,imageWidths:i,loader:n=$,loading:s,normalizedProps:c,passthroughProps:f,placeholderWidth:r,sizes:x},d)=>{const v=l.useMemo(()=>{const u=i===void 0?void 0:N(i,c.aspectRatio,t),o=c.aspectRatio&&r?r*(W(c.aspectRatio)??1):void 0,g=E(c.src,u,n),h=n({src:c.src,width:r,height:o,crop:t});return{placeholderHeight:o,srcSet:g,src:h}},[t,i,n,c,r]);return j.jsx("img",{ref:d,alt:c.alt,decoding:e,height:v.placeholderHeight,loading:s,sizes:x,src:v.src,srcSet:v.srcSet,width:r,...f,style:{width:c.width,aspectRatio:c.aspectRatio,...f.style}})});function $({src:t,width:e,height:i,crop:n}){if(!t)return"";const s=new URL(t);return e&&s.searchParams.append("width",Math.round(e).toString()),i&&s.searchParams.append("height",Math.round(i).toString()),n&&s.searchParams.append("crop",n),s.href}function I(t="100%",e="auto"){return a(t.toString()).unit===a(e.toString()).unit}function a(t){const e=t.replace(/[0-9.]/g,""),i=parseFloat(t.replace(e,""));return{unit:e===""?i===void 0?"auto":"px":e,number:i}}function R(t){if(t===void 0)return;const{unit:e,number:i}=a(t.toString());switch(e){case"em":return i*16;case"rem":return i*16;case"px":return i;case"":return i;default:return}}function A(t){return typeof t=="number"||typeof t=="string"&&/\d(px|em|rem)$/.test(t)}function E(t,e,i=$){return t?(e==null?void 0:e.length)===0||!e?t:e.map((n,s)=>`${i({src:t,width:n.width,height:n.height,crop:n.crop})} ${e.length===3?`${s+1}x`:`${n.width??0}w`}`).join(", "):""}function C(t="100%",e,i,n){const s=Array.from({length:e},(f,r)=>r*n+i),c=Array.from({length:3},(f,r)=>(r+1)*(R(t)??0));return A(t)?c:s}function W(t){if(!t)return;const[e,i]=t.split("/");return 1/(Number(e)/Number(i))}function N(t,e,i="center"){return t?t.map(s=>({width:s,height:e?s*(W(e)??1):void 0,crop:i})):void 0}export{K as I};
