import{r as m,j as y}from"./jsx-runtime-D2HyDbKh.js";const w="2024-04",v={storeDomain:"test",storefrontToken:"abc123",storefrontApiVersion:w,countryIsoCode:"US",languageIsoCode:"EN",getStorefrontApiUrl(){return""},getPublicTokenHeaders(){return{}},getShopifyDomain(){return""}},F=m.createContext(v);function x(){const r=m.useContext(F);if(!r)throw new Error("'useShop()' must be a descendent of <ShopifyProvider/>");return r}function P(r){const{countryIsoCode:u,languageIsoCode:n}=x(),o=n.includes("_")?n.replace("_","-"):`${n}-${u}`;if(!o)throw new Error("useMoney(): Unable to get 'locale' from 'useShop()', which means that 'locale' was not passed to '<ShopifyProvider/>'. 'locale' is required for 'useMoney()' to work");const t=parseFloat(r.amount),s=m.useMemo(()=>({style:"currency",currency:r.currencyCode}),[r.currencyCode]),a=l(o,s),i=l(o,{...s,currencyDisplay:"name"}),f=l(o,{...s,currencyDisplay:"narrowSymbol"}),c=l(o,{...s,minimumFractionDigits:0,maximumFractionDigits:0}),p=l(o),g=l(o,{minimumFractionDigits:0,maximumFractionDigits:0}),d=e=>e.type==="currency",h=m.useMemo(()=>({original:()=>r,currencyCode:()=>r.currencyCode,localizedString:()=>a().format(t),parts:()=>a().formatToParts(t),withoutTrailingZeros:()=>t%1===0?c().format(t):a().format(t),withoutTrailingZerosAndCurrency:()=>t%1===0?g().format(t):p().format(t),currencyName:()=>{var e;return((e=i().formatToParts(t).find(d))==null?void 0:e.value)??r.currencyCode},currencySymbol:()=>{var e;return((e=a().formatToParts(t).find(d))==null?void 0:e.value)??r.currencyCode},currencyNarrowSymbol:()=>{var e;return((e=f().formatToParts(t).find(d))==null?void 0:e.value)??""},amount:()=>a().formatToParts(t).filter(e=>["decimal","fraction","group","integer","literal"].includes(e.type)).map(e=>e.value).join("")}),[r,t,i,a,f,p,c,g]);return m.useMemo(()=>new Proxy(h,{get:(e,S)=>{var C;return(C=Reflect.get(e,S))==null?void 0:C.call(null)}}),[h])}function l(r,u){return m.useMemo(()=>{let n;return()=>n??(n=new Intl.NumberFormat(r,u))},[r,u])}function M({data:r,as:u,withoutCurrency:n,withoutTrailingZeros:o,measurement:t,measurementSeparator:s="/",...a}){if(!T(r))throw new Error("<Money/> needs a valid 'data' prop that has 'amount' and 'currencyCode'");const i=P(r),f=u??"div";let c=i.localizedString;return(n||o)&&(n&&!o?c=i.amount:!n&&o?c=i.withoutTrailingZeros:c=i.withoutTrailingZerosAndCurrency),y.jsxs(f,{...a,children:[c,t&&t.referenceUnit&&y.jsxs(y.Fragment,{children:[s,t.referenceUnit]})]})}function T(r){return typeof r.amount=="string"&&!!r.amount&&typeof r.currencyCode=="string"&&!!r.currencyCode}export{M};
